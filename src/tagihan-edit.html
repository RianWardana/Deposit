<dom-module id="tagihan-edit">
    <template>
        <style include="iron-flex iron-flex-alignment">
            paper-button {
                color: #FFAB00;
            }
            
            @media (max-height: 450px) {
                paper-dialog {
                    bottom: 0;
                }
            }

            paper-input[label="Nama"] { margin-right: 20px; }
        </style>

        <paper-dialog id="dialog" on-iron-overlay-closed="_dialogClosed">
            <h2>Edit Pengeluaran</h2>
            <div class="horizontal layout">
                <paper-input list="daftar-pengeluaran-edit" no-label-float label="Nama" value="{{nama}}" maxlength="64"></paper-input>
                <datalist id="daftar-pengeluaran-edit">
                    <template is="dom-repeat" items="{{_getDaftarPengeluaran}}" as="item">
                        <option value="{{item}}">
                    </template>
                </datalist>
                <paper-input no-label-float type="number" value="{{jumlah}}" auto-validate pattern="[0-9]*" maxlength="8">
                    <div slot="prefix">Rp</div>
                </paper-input>
            </div>
            <div class="buttons">
                <paper-button dialog-confirm>Batal</paper-button>
                <paper-button id="btnHapus" on-tap="_tapHapus">Hapus</paper-button>
                <paper-button id="btnTambah" on-tap="_tapSimpan">Simpan</paper-button>
            </div>
        </paper-dialog>

        <paper-toast id="toastKosong" text="Nama dan jumlah wajib diisi"></paper-toast>
    </template>



    <script>
        class tagihanEdit extends Polymer.Element {
            static get is() {
                return 'tagihan-edit';
            }

            static get properties() {
                return {
                    triggerEdit: {
                        type: Boolean,
                        observer: '_editTriggered'
                    },

                    dataEdit: {
                        type: Object,
                        notify: true
                    },

                    // _getDaftarPengeluaran: {
                    //     type: Array,
                    //     value: function() {
                    //         return thisTagTambah.daftarNamaPengeluaran;
                    //     }
                    // },

                    nama: String,
                    jumlah: Number
                }
            }

            ready() {
                super.ready(); 
                window.thisTagEdit = this;

                this.$.dialog.animationConfig = {
                    'entry': [
                        {
                            name: 'fade-in-animation',
                            node: this.$.dialog,
                            timing: {duration: 300}
                        }
                    ],
                    'exit': [
                        {
                            name: 'fade-out-animation',
                            node: this.$.dialog,
                            timing: {duration: 300}
                        }
                    ]
                }
            }

            _editTriggered() {
                this.$.dialog.open()
            }

            _tapHapus() {
                this.$.dialog.close();
                    this.dataEdit = {
                        key: this.key,
                        jumlah: 0
                    }
            }

            _tapSimpan() {
                if ((this.nama != "") && (this.jumlah != "")) { 
                    this.$.dialog.close();
                    this.dataEdit = {
                        key: this.key,
                        nama: this.nama,
                        jumlah: this.jumlah
                    }
                } else {
                    this.$.toastKosong.open()
                }
            }

            _dialogClosed() {
                window.onresize = null
            }

        }
        customElements.define(tagihanEdit.is, tagihanEdit);
    </script>
</dom-module>